<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Aiden’s Entertainment</title>

<!-- Preload (helps first paint) -->
<link rel="preload" as="image" href="assets/castlebg.jpeg">
<link rel="preload" as="image" href="assets/aidensent.png">

<style>
  :root{
    --neon:#4C3BFF;          /* your purple */
    --neon-soft:#b9b4ff;     /* inner glow */
    --bg:#0a0911;
    --cardW:3cm; --cardH:3cm;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{background:var(--bg);color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}

  /* Background photo under everything */
  .bg{position:fixed;inset:0;z-index:-2;background:radial-gradient(50% 25% at 50% 8%, rgba(76,59,255,.25), transparent 60%), #0a0911}
  .bg>img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;object-position:center top;opacity:0;transition:opacity .35s}
  .bg>img.show{opacity:1}

  /* Gentle ambient glow over the photo */
  .glow{position:fixed;inset:0;z-index:-1;pointer-events:none;background:
    radial-gradient(40% 16% at 50% 10%, rgba(185,180,255,.35), transparent 70%),
    radial-gradient(55% 24% at 50% 11%, rgba(76,59,255,.35), transparent 80%);}

  /* Header (logo at the very top, nav under it) */
  header{position:sticky;top:0;display:flex;flex-direction:column;align-items:center;padding-top:8px}
  .logoWrap{display:flex;justify-content:center;width:100%}
  .logoImg{width:min(520px,92vw);height:auto;display:block;filter:
      drop-shadow(0 0 6px var(--neon-soft))
      drop-shadow(0 0 16px var(--neon))
      drop-shadow(0 0 28px rgba(76,59,255,.6));
  }
  /* Fallback text logo if image can’t be loaded */
  .logoText{font-size:clamp(32px,10vw,88px);font-weight:900;letter-spacing:.06em;margin:0;
    color:#fff;text-shadow:
      0 0 6px var(--neon-soft),
      0 0 14px var(--neon),
      0 0 32px rgba(76,59,255,.7);
    display:none;
  }

  /* Nav buttons */
  .nav{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;padding:10px}
  .btn{padding:10px 16px;border:2px solid var(--neon);border-radius:12px;background:#111;color:#fff;font-weight:800;letter-spacing:.4px;cursor:pointer}
  .btn:hover{background:var(--neon);color:#000}
  .btn.tab.active{background:var(--neon);color:#000}

  /* Category chips */
  .chips{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin:0 0 10px}
  .chip{padding:5px 10px;border:1px solid var(--neon);border-radius:999px;background:rgba(18,16,30,.5);cursor:pointer}
  .chip.active{background:var(--neon);color:#000}

  main{padding:8px 10px 48px}
  #grid{display:flex;flex-wrap:wrap;gap:12px;justify-content:center}

  .card{width:calc(var(--cardW) + 2rem);text-align:center}
  .window{position:relative;width:var(--cardW);height:var(--cardH);margin:0 auto;border-radius:12px;overflow:hidden}
  .window img{width:100%;height:100%;object-fit:cover;display:block}
  .placeholder{width:100%;height:100%;display:grid;place-items:center;border-radius:12px;background:rgba(30,20,60,.6);color:#ddd}

  /* Neon tube frame */
  .window::after{
    content:"";position:absolute;inset:0;border-radius:12px;border:3px solid #cfcaff;
    box-shadow:
      0 0 6px 2px var(--neon),
      0 0 16px 6px var(--neon),
      0 0 34px 10px rgba(76,59,255,.65);
    pointer-events:none;animation:flick 3s infinite;
  }
  @keyframes flick{0%,19%,21%,23%,25%,54%,56%,100%{opacity:1}20%,24%,55%{opacity:.8}}

  .row{display:flex;align-items:center;justify-content:center;gap:8px;margin-top:6px}
  .title a{color:#fff;text-decoration:none;text-shadow:0 0 8px rgba(76,59,255,.45)}
  .title a:hover{text-decoration:underline}
  .menu{position:relative}
  .more{border:1px solid var(--neon);background:rgba(18,16,30,.7);color:#fff;border-radius:10px;padding:2px 8px;cursor:pointer;font-weight:800}
  .panel{position:absolute;left:50%;transform:translateX(-50%);margin-top:6px;display:none;min-width:180px;background:#0f0d17;border:1px solid var(--neon);border-radius:12px;padding:6px;z-index:5}
  .menu.open .panel{display:block}
  .item{display:block;width:100%;text-align:left;margin:2px 0;padding:8px 10px;border:1px solid rgba(76,59,255,.4);border-radius:10px;background:transparent;color:#fff;cursor:pointer}
  .item:hover{background:var(--neon);color:#000}

  .chosen{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin-top:6px}
  .cat{padding:3px 8px;border:1px solid rgba(76,59,255,.7);border-radius:999px;font-size:.75rem;background:rgba(24,18,38,.55)}
</style>
</head>
<body data-section="movies">
  <!-- background layers -->
  <div class="bg"><img id="bg" alt=""></div>
  <div class="glow" aria-hidden="true"></div>

  <header>
    <div class="logoWrap">
      <img id="logo" class="logoImg" alt="Aiden’s Entertainment">
      <h1 id="logoText" class="logoText">AIDEN’S<br>ENTERTAINMENT</h1>
    </div>

    <nav class="nav">
      <button id="tabMovies" class="btn tab">MOVIES</button>
      <button id="tabTV" class="btn tab">TV SHOWS</button>
      <button id="tabPorn" class="btn tab">PORN</button>
      <button id="addBtn" class="btn">ADD MOVIE</button>
    </nav>

    <div id="chips" class="chips"></div>
  </header>

  <main><div id="grid"></div></main>

  <!-- Paste your list between the markers if you want to reseed on first run -->
  <script id="seed-raw" type="text/plain">
<!-- PASTE HERE (Title - URL, next line optional: "thumbnail: <url>"), blank line between items -->
  </script>

<script>
/* ========= CONFIG ========= */
const CATS = ['horror','thriller','fantasy','sci-fi','comedy','cartoon','porn','other'];
const STORAGE_KEYS = { movies:'castle.movies.v25', tv:'castle.tv.v25', porn:'castle.porn.v25' };

let section = document.body.dataset.section || 'movies';
let currentFilter = 'All';

/* ========= IMAGE LOADERS ========= */
function setImgWithFallback(imgEl, list, onFailShowText){
  let i=0;
  const next=()=>{ if(i>=list.length){ if(onFailShowText) onFailShowText(); return; } imgEl.src=list[i++]; };
  imgEl.onerror=next;
  imgEl.onload=()=>imgEl.classList.add('show');
  next();
}
function setupBackgroundAndLogo(){
  const bg=document.getElementById('bg');
  setImgWithFallback(bg, [
    'assets/castlebg.jpeg',
    'https://edef3.pcloud.com/DLZt042qEZnDxISB7ZWjPfZ7ZjJqaVkZNVZZnHXZZPUd7ZS0Ze0ZTpZJEop2M3fd58Vl0qNBzUo3Vf8n4n7/castlebg.jpeg',
    'https://images.weserv.nl/?url=' + encodeURIComponent('edef3.pcloud.com/DLZt042qEZnDxISB7ZWjPfZ7ZjJqaVkZNVZZnHXZZPUd7ZS0Ze0ZTpZJEop2M3fd58Vl0qNBzUo3Vf8n4n7/castlebg.jpeg')
  ]);

  const logo=document.getElementById('logo');
  const logoText=()=>{ document.getElementById('logo').style.display='none'; document.getElementById('logoText').style.display='block'; };
  setImgWithFallback(logo, [
    'assets/aidensent.png',
    'https://edef11.pcloud.com/DLZh51BqEZ2pnOSB7ZWjPfZ7ZXFqaVkZ3VZZnHXZZsaN5ZwJZXJZJVZxoibDOlI51uhh5jphbiJgBhNz98X/aidensent.png',
    'https://images.weserv.nl/?url=' + encodeURIComponent('edef11.pcloud.com/DLZh51BqEZ2pnOSB7ZWjPfZ7ZXFqaVkZ3VZZnHXZZsaN5ZwJZXJZJVZxoibDOlI51uhh5jphbiJgBhNz98X/aidensent.png')
  ], logoText);
}

/* ========= DATA ========= */
function slugify(s){return (s||'').toLowerCase().replace(/&/g,' and ').replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'');}
function parseRawList(raw){
  const blocks = raw.split(/\n\s*\n/).map(b=>b.trim()).filter(Boolean);
  const out=[]; const head=/^(.+?)\s*[-:]\s*(https?:\/\/\S+)/i; const th=/^thumbnail\s*:\s*(https?:\/\/\S+)?/i;
  for(const b of blocks){
    const lines=b.split(/\n/).map(s=>s.trim()).filter(Boolean);
    const m=lines[0]?.match(head); if(!m) continue;
    let img=null; for(let i=1;i<lines.length;i++){ const mt=lines[i].match(th); if(mt){ img = mt[1] ? mt[1].trim() : null; if(!img && lines[i+1] && /^https?:\/\//i.test(lines[i+1])) img=lines[i+1].trim(); break; } }
    out.push({title:m[1].trim(), link:m[2].trim(), img, categories:[]});
  }
  return out;
}
const load = ()=>{ try{return JSON.parse(localStorage.getItem(STORAGE_KEYS[section]))||[]}catch{return[]} };
const save = (items)=>localStorage.setItem(STORAGE_KEYS[section], JSON.stringify(items));
function preloadOnce(){
  if(section!=='movies') return;
  if(localStorage.getItem(STORAGE_KEYS.movies)) return;
  const raw=(document.getElementById('seed-raw')?.textContent||'').trim();
  if(!raw) return;
  const items=parseRawList(raw);
  if(items.length) localStorage.setItem(STORAGE_KEYS.movies, JSON.stringify(items));
}

/* ========= THUMBNAILS ========= */
function buildThumb(src, title){
  const tries=[];
  // local by remote basename
  if(src){ try{ const base = src.split('?')[0].split('/').pop(); if(base) tries.push(`assets/thumbs/${base}`);}catch{} }
  // local by title slug (jpg,png,jpeg,webp)
  const slug=slugify(title||''); ['jpg','jpeg','png','webp'].forEach(ext=>{ if(slug) tries.push(`assets/thumbs/${slug}.${ext}`); });
  // remote as-is, then proxy
  if(src) tries.push(src, 'https://images.weserv.nl/?url='+encodeURIComponent(src));

  const img=document.createElement('img'); img.loading='lazy'; img.decoding='async'; img.referrerPolicy='no-referrer';
  let i=0; const next=()=>{ if(i>=tries.length){ img.replaceWith(Object.assign(document.createElement('div'),{className:'placeholder',textContent:'No Thumbnail'})); return;} img.src=tries[i++]; };
  img.onerror=next; next(); return img;
}

/* ========= UI ========= */
function setActiveTab(){
  document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
  document.getElementById(section==='movies'?'tabMovies':section==='tv'?'tabTV':'tabPorn')?.classList.add('active');
  document.getElementById('addBtn').textContent = section==='tv'?'ADD SHOW':(section==='movies'?'ADD MOVIE':'ADD LINK');
}
function renderChips(items){
  const wrap=document.getElementById('chips'); wrap.innerHTML='';
  const count=(c)=>items.filter(i=>(i.categories||[]).includes(c)).length;
  ['All',...CATS].forEach(c=>{
    const el=document.createElement('div'); el.className='chip'+(c===currentFilter?' active':''); el.textContent=`${c} (${c==='All'?items.length:count(c)})`;
    el.onclick=()=>{currentFilter=c; render()};
    wrap.appendChild(el);
  });
}
function menu(onEdit,onCover,onCats,onDelete){
  const w=document.createElement('div'); w.className='menu';
  const b=document.createElement('button'); b.className='more'; b.textContent='…';
  const p=document.createElement('div'); p.className='panel';
  const mk=(t,h)=>{const x=document.createElement('button'); x.className='item'; x.textContent=t; x.onclick=(e)=>{e.preventDefault();e.stopPropagation();h();w.classList.remove('open')}; return x};
  p.append(mk('Edit Link',onEdit), mk('Change Cover',onCover), mk('Edit Categories',onCats), mk('Delete',onDelete));
  b.onclick=(e)=>{e.preventDefault();e.stopPropagation();w.classList.toggle('open')};
  document.addEventListener('click',ev=>{ if(!w.contains(ev.target)) w.classList.remove('open'); });
  w.append(b,p); return w;
}
function card(item, idx, items){
  const c=document.createElement('div'); c.className='card';
  const a=document.createElement('a'); a.className='window'; a.href=item.link||'#'; a.target='_blank'; a.rel='noopener';
  a.appendChild(buildThumb(item.img||'', item.title||'')); c.appendChild(a);

  const row=document.createElement('div'); row.className='row';
  const t=document.createElement('div'); t.className='title'; t.innerHTML=`<a href="${item.link||'#'}" target="_blank" rel="noopener">${item.title||'Untitled'}</a>`;
  row.appendChild(t);
  row.appendChild(menu(
    ()=>{const u=prompt('Enter the link URL:', item.link||''); if(u===null) return; const d=load(); d[idx].link=(u.trim()||'#'); save(d); render();},
    ()=>{const u=prompt('Thumbnail image URL (optional, blank to remove):', item.img||''); if(u===null) return; const d=load(); d[idx].img=(u.trim()||null); save(d); render();},
    async()=>{const picked=prompt('Categories (comma separated):', (item.categories||[]).join(', ')); if(picked===null) return; const d=load(); d[idx].categories=picked.split(',').map(s=>s.trim()).filter(Boolean); save(d); render();},
    ()=>{ if(confirm('Delete this item?')){ const d=load(); d.splice(idx,1); save(d); render(); } }
  ));
  c.appendChild(row);

  const chosen=document.createElement('div'); chosen.className='chosen';
  (item.categories||[]).forEach(cat=>{ const s=document.createElement('span'); s.className='cat'; s.textContent=cat; chosen.appendChild(s); });
  c.appendChild(chosen);
  return c;
}
function render(){
  setActiveTab();
  const items=load(); renderChips(items);
  const grid=document.getElementById('grid'); grid.innerHTML='';
  const list=currentFilter==='All'?items:items.filter(i=>(i.categories||[]).includes(currentFilter));
  list.forEach(it=>grid.appendChild(card(it, items.indexOf(it), items)));
}

/* ========= ADD ITEM ========= */
function addItem(){
  const link=prompt(`Enter the ${section==='tv'?'show':'link'} (URL):`)||'#';
  const title=prompt('Enter a title:')||'Untitled';
  const img=prompt('Thumbnail image URL (optional):')||null;
  const cats=(prompt('Categories (comma separated):')||'').split(',').map(s=>s.trim()).filter(Boolean);
  const items=load(); items.push({title,link,img,categories:cats}); save(items); currentFilter='All'; render();
}

/* ========= BOOT ========= */
window.addEventListener('DOMContentLoaded',()=>{
  setupBackgroundAndLogo();
  preloadOnce();
  document.getElementById('tabMovies').onclick=()=>{section='movies';currentFilter='All';render()};
  document.getElementById('tabTV').onclick=()=>{section='tv';currentFilter='All';render()};
  document.getElementById('tabPorn').onclick=()=>{section='porn';currentFilter='All';render()};
  document.getElementById('addBtn').onclick=addItem;
  render();
});
</script>
</body>
</html>
